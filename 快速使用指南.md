# ABCD策略 - 快速使用指南

## 🚀 快速開始

### 1. 環境準備
```bash
# 安裝必要套件
pip install shioaji pandas numpy talib python-dotenv matplotlib seaborn

# 下載程式檔案
# ABCD策略當沖版_增強版.py
```

### 2. 設定API (實盤/模擬交易用)
創建 `.env` 檔案：
```env
API_KEY=your_api_key_here
SECRET_KEY=your_secret_key_here
CA_CERT_PATH=your_cert_path_here
CA_PASSWORD=your_cert_password_here
MAX_POSITION=1
STOP_LOSS_PCT=0.005
TAKE_PROFIT_PCT=0.025
```

### 3. 運行程式
```python
python ABCD策略當沖版_增強版.py
```

## 📋 模式選擇指南

### 新手建議路徑：
1. **調試測試** (模式5) → 了解系統功能
2. **回測模式** (模式2) → 驗證策略效果  
3. **即時模擬** (模式1) → 實時測試
4. **策略優化** (模式4) → 參數調整
5. **實盤交易** (模式3) → 小資金實戰

### 各模式適用場景：

#### 模式1: 即時交易模式 (模擬)
- **適用**: API功能測試、即時信號驗證
- **需要**: 永豐金API設定
- **輸出**: 即時價格監控、信號提醒

#### 模式2: 回測模式  
- **適用**: 策略驗證、歷史表現分析
- **需要**: CSV歷史數據檔案
- **輸出**: 詳細回測報告、圖表分析

#### 模式3: 實盤交易 🔴
- **適用**: 真實交易執行
- **需要**: 有效API、充足保證金
- **風險**: 真實資金損失

#### 模式4: 策略優化
- **適用**: 參數調優、策略改進
- **需要**: 充足歷史數據
- **輸出**: 最佳參數組合

#### 模式5: 調試測試
- **適用**: 功能驗證、問題排查
- **需要**: 測試數據 (可選)
- **輸出**: 詳細技術分析

## 📊 CSV數據格式要求

### 必要欄位
- Open (開盤價)
- High (最高價) 
- Low (最低價)
- Close (收盤價)

### 可選欄位
- Volume (成交量) - 如無則自動生成
- DateTime/Time/Date (時間) - 如無則自動生成

### 支援格式
- 編碼: UTF-8, Big5, GB2312, CP1252
- 分隔符: 逗號 (,)
- 中英文欄位名稱皆可

### 數據範例
```csv
時間,開盤,最高,最低,收盤,成交量
2024-01-01 09:00:00,17000,17050,16980,17020,1500
2024-01-01 09:01:00,17020,17080,17010,17065,1200
```

## ⚙️ 調試模式說明

### 啟用調試模式
```
🔍 是否啟用調試模式？(y/N): y
```

### 調試模式優點
- 顯示詳細ABCD條件分析
- 即時技術指標數值
- 信號觸發原因解釋
- 每5分鐘狀態報告

### 調試輸出範例
```
🔍 ABCD多頭信號 - 滿足條件: 3/4
   A(RSI): ✓ (從超賣回彈)
   B(MA): ✓ (多頭排列)  
   C(Price): ✗ (位置偏高)
   D(Trend): ✓ (趨勢確認)
```

## 🎯 策略優化建議

### 優化流程
1. 準備至少6個月歷史數據
2. 選擇適當優化等級：
   - 快速: 測試用，約10-50種組合
   - 標準: 實用，約100-500種組合  
   - 深度: 精確，約1000+種組合

### 參數調整重點
- **RSI週期**: 影響反轉信號敏感度
- **MA快慢線**: 影響趨勢判斷準確性
- **信號強度閾值**: 控制交易頻率
- **止損止利比例**: 影響風險回報比

### 優化結果評估
- 總報酬率 > 10%
- 勝率 > 50%
- 最大回撤 < 15%
- 交易次數適中 (不過度交易)

## 🛡️ 安全使用提醒

### 實盤交易前檢查清單
- [ ] 充分回測驗證
- [ ] 模擬交易測試
- [ ] API連接穩定
- [ ] 保證金充足
- [ ] 風險控制理解
- [ ] 緊急停止準備

### 風險管理要點
1. **資金控制**: 不投入超過可承受損失的資金
2. **倉位管理**: 從小倉位開始測試
3. **時間控制**: 遵守不留倉策略
4. **心理準備**: 接受策略有虧損週期

### 常見問題處理

#### Q: 程式運行錯誤？
A: 
1. 檢查套件安裝完整性
2. 驗證CSV檔案格式
3. 確認API設定正確
4. 使用調試模式排查

#### Q: 回測結果不理想？
A:
1. 檢查數據品質
2. 調整ABCD參數
3. 嘗試策略優化模式
4. 考慮市場環境變化

#### Q: API連接失敗？
A:
1. 檢查網路連接
2. 驗證API金鑰有效性
3. 確認憑證檔案路徑
4. 聯繫券商技術支援

## 📞 技術支援

### 自助排查
1. 使用調試模式了解詳細狀況
2. 檢查錯誤訊息提示
3. 參考README文檔說明

### 改進建議
歡迎提出功能改進建議和錯誤回報！

---

**⚠️ 免責聲明**: 本程式僅供學習研究使用，實際交易請謹慎評估風險。
